(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){e.exports=n.p+"static/media/petful-cat-dog.b5752275.jpg"},24:function(e,t,n){e.exports=n(39)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(20),r=n.n(s),l=n(12),i=n(2),c=n(3),u=n(5),p=n(4),m=n(6),h=n(10),d=n(21),f=n.n(d),v="https://petful-adoption.herokuapp.com/api",g={postNewPerson:function(e){return fetch("".concat(v,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)return e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},getUsersInline:function(){return fetch("".concat(v,"/people"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},getUsersPlace:function(e){return fetch("".concat(v,"/people/").concat(e),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))}},P=o.a.createContext({nameSubmitted:null,availDog:{},allOtherDogs:[],availCat:{},allOtherCats:[],person:"",personPosition:"",people:[],succesfulAdopt:null,adoptee:{},human:"",interval1:null,interval2:null,setAvailDog:function(){},setAllOtherDogs:function(){},setAvailCat:function(){},setAllOtherCats:function(){},setPerson:function(){},setPeople:function(){},setInterval1:function(){},setInterval2:function(){}}),b=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={availDog:{},allOtherDogs:[],availCat:{},allOtherCats:[],person:"",personPosition:"",people:[],interval1:null,interval2:null},n.setAvailDog=function(e){n.setState({availDog:e})},n.setAllOtherDogs=function(e){n.setState({allOtherDogs:e})},n.setAvailCat=function(e){n.setState({availCat:e})},n.setAllOtherCats=function(e){n.setState({allOtherCats:e})},n.setPerson=function(e){n.setState({person:e})},n.setPersonPosition=function(e){n.setState({personPosition:e})},n.setPeople=function(e){n.setState({people:e})},n.setInterval1=function(e){n.setState({interval1:e})},n.setInterval2=function(){var e=setInterval((function(){n.addPeopleToQueue(n.setPeople)}),5e3);n.setState({interval2:e})},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"makeid",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t}},{key:"addPeopleToQueue",value:function(){var e=this,t=this.makeid(7);g.postNewPerson({name:t}),g.getUsersInline().then((function(t){e.setPeople(t),e.setState({people:t})}))}},{key:"render",value:function(){var e={availDog:this.state.availDog,allOtherDogs:this.state.allOtherDogs,availCat:this.state.availCat,allOtherCats:this.state.allOtherCats,person:this.state.person,personPosition:this.state.personPosition,people:this.state.people,interval1:this.state.interval1,interval2:this.state.interval2,setAvailDog:this.setAvailDog,setAllOtherDogs:this.setAllOtherDogs,setAvailCat:this.setAvailCat,setAllOtherCats:this.setAllOtherCats,setPerson:this.setPerson,setPersonPosition:this.setPersonPosition,setPeople:this.setPeople,setInterval1:this.setInterval1,setInterval2:this.setInterval2};return o.a.createElement(P.Provider,{value:e},this.props.children)}}]),t}(a.Component),A=P,E=(n(18),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:"Home_header"},"Welcome to Petful"),o.a.createElement("p",{className:"Home_description"},"We work on a first in, first out basis.",o.a.createElement("br",{className:"desc_break"}),"Only the Cats and Dogs who have been here the longest get adopted first.",o.a.createElement("br",null),"We hope you find your new furry family member!"),o.a.createElement("div",{className:"Home_image"},o.a.createElement("img",{src:f.a,alt:"cute cat and dog"})),o.a.createElement("div",{className:"Home_button_container"},o.a.createElement("label",{className:"Home_label"},"Click  Below to Begin the Adoption Process"),o.a.createElement("button",{type:"button",className:"Home_button"},o.a.createElement(l.b,{to:"/adoption-page",className:"Home_button"},"Adoptable Pets"))))}}]),t}(a.Component));E.contextType=A;n(34);var N=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("section",{className:"NextAvail"},o.a.createElement("div",{className:"Next_info_container"},o.a.createElement("img",{src:this.props.image,alt:"available pet",className:"Next_avail_image"}),o.a.createElement("p",{className:"Next_info"},"Name: ",this.props.name),o.a.createElement("p",{className:"Next_info"},"Age: ",this.props.age),o.a.createElement("p",{className:"Next_info"},"Breed: ",this.props.breed),o.a.createElement("p",{className:"Next_info"},this.props.description),o.a.createElement("p",{className:"Next_info"},"Sex: ",this.props.gender),o.a.createElement("p",{className:"Next_info"},this.props.name,"'s Story: ",this.props.story)))}}]),t}(a.Component),y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"UserList_container"},o.a.createElement("p",{className:"UserList_info",style:{margin:"5px 0",textAlign:"center"}},this.props.name)))}}]),t}(a.Component),O=(n(35),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"UsersPlace_container"},o.a.createElement("h3",{className:"UsersPlace_header"},"Keep track of how long until you can adopt"),o.a.createElement("p",{className:"UsersPlace_name"},"Name: ",this.props.name),o.a.createElement("span",{className:"UsersPlace_place"},"Your place in line: ",this.props.position))}}]),t}(a.Component)),j=(n(36),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"InlinePets_container"},o.a.createElement("div",{className:"InlinePets_info name"},o.a.createElement("p",{className:"title"},"Name:"),o.a.createElement("div",{className:"content"},this.props.name)),o.a.createElement("div",{className:"InlinePets_info"},o.a.createElement("p",{className:"title"},"Breed:"),o.a.createElement("div",{className:"content"},this.props.breed)),o.a.createElement("div",{className:"InlinePets_info age"},o.a.createElement("p",{className:"title"},"Age:"),o.a.createElement("div",{className:"content"},this.props.age))))}}]),t}(a.Component)),C={getNextAvailDog:function(){return fetch("".concat(v,"/pets/dog"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},getAllOtherDogs:function(){return fetch("".concat(v,"/pets/dogs"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},adoptedDog:function(){return fetch("".concat(v,"/pets/dog/adopt"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))}},_={getNextAvailCat:function(){return fetch("".concat(v,"/pets/cat"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},getAllOtherCats:function(){return fetch("".concat(v,"/pets/cats"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))},adoptedCat:function(){return fetch("".concat(v,"/pets/cat/adopt"),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){console.error({err:e})}))}},k=(n(37),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={nameSubmitted:null,availDog:{},allOtherDogs:[],availCat:{},allOtherCats:[],person:"",personPosition:0,people:[],successfulAdopt:!1,adoptee:{},human:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context,n=t.setAvailDog,a=t.setAllOtherDogs,o=t.setAvailCat,s=t.setAllOtherCats,r=t.setPeople,l=t.setPerson,i=t.setPersonPosition,c=localStorage.getItem("Person");C.getNextAvailDog().then((function(e){n(e)})),C.getAllOtherDogs().then((function(e){a(e)})),_.getNextAvailCat().then((function(e){o(e)})),_.getAllOtherCats().then((function(e){s(e)})),g.getUsersInline().then((function(e){r(e)})),c&&g.getUsersPlace(c).then((function(t){l(t.name),i(t.position),e.setState({person:t.name,personPosition:t.position,nameSubmitted:!0})}))}},{key:"startInterval2",value:function(){var e=this.context,t=e.personPosition,n=e.setInterval2;1===t&&(console.log("setting interval 2"),n())}},{key:"makeid",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t}},{key:"addPeopleToQueue",value:function(e){var t=this,n=this.makeid(7);g.postNewPerson({name:n}),g.getUsersInline().then((function(n){e(n),t.setState({people:n})}))}},{key:"handleCatAdoptClick",value:function(e,t,n,a,o,s,r){_.adoptedCat(),_.getNextAvailCat().then((function(t){e(t)})),_.getAllOtherCats().then((function(e){t(e)})),this.updatePeople(a,o,s,r)}},{key:"handleCatAdoptActuallyClicked",value:function(e,t,n,a,o,s,r){var l=this;_.adoptedCat().then((function(e){console.log(e,"res from adoptedCat"),l.setState({successfulAdopt:!0,adoptee:e.adoptee,human:e.human})})),_.getNextAvailCat().then((function(t){e(t)})),_.getAllOtherCats().then((function(e){t(e)})),a(""),o(""),localStorage.clear("Person"),localStorage.clear("Position"),g.getUsersInline().then((function(e){s(e)}))}},{key:"handleDogAdoptActuallyClicked",value:function(e,t,n,a,o,s,r){var l=this;C.adoptedDog().then((function(e){l.setState({successfulAdopt:!0,adoptee:e.adoptee,human:e.human})})),C.getNextAvailDog().then((function(t){e(t)})),C.getAllOtherDogs().then((function(e){t(e)})),a(""),o(""),localStorage.clear("Person"),localStorage.clear("Position"),g.getUsersInline().then((function(e){s(e)}))}},{key:"handleDogAdoptClick",value:function(e,t,n,a,o,s){var r=this;console.log("dog adopt firing!"),C.adoptedDog().then((function(e){r.setState({successfulAdopt:!0,adoptee:e.adoptee,human:e.human})})),C.getNextAvailDog().then((function(t){e(t)})),C.getAllOtherDogs().then((function(e){t(e)})),this.updatePeople(a,o,s)}},{key:"updatePeople",value:function(e,t,n,a){var o=this;g.getUsersInline().then((function(e){n(e)})),g.getUsersPlace(this.state.person).then((function(a){if(console.log(a,"res from people service"),e(a.name),t(a.position),1===a.position){console.log("setting interval 2");var s=setInterval((function(){o.addPeopleToQueue(n)}),5e3);o.setState({interval2:s})}localStorage.setItem("Position",a.position)}))}},{key:"handleNameSubmit",value:function(e,t,n,a,o,s,r){var l=this;e.preventDefault();var i=this.context.setInterval1,c=e.target.name.value;localStorage.setItem("Person",c),e.target.name.value="";var u={name:c};g.postNewPerson(u),this.setState({person:u.name,nameSubmitted:!0}),t(u.name),g.getUsersInline().then((function(e){n(e)})),g.getUsersPlace(u.name).then((function(e){a(e.position),localStorage.setItem("Position",e.position)})),i(setInterval((function(){!function(e){e[Math.floor(Math.random()*e.length-1)]}([l.handleCatAdoptClick(o,s,r,t,a,n)])}),5e3))}},{key:"handleClearSuccess",value:function(){this.setState({successfulAdopt:!1})}},{key:"renderSuccessAdopt",value:function(e,t){var n=this;return o.a.createElement("div",{className:"AP_success_adopt"},o.a.createElement("p",null,"Yay! ",t," was adopted by ",e,"!"),o.a.createElement("span",{onClick:function(e){return n.handleClearSuccess()}}," X "))}},{key:"renderNameInput",value:function(){var e=this,t=this.context,n=t.setPerson,a=t.setPeople,s=t.setPersonPosition,r=t.setAvailCat,l=t.setAllOtherCats,i=t.personPosition;return o.a.createElement("section",{className:"AP_name_input"},o.a.createElement("form",{onSubmit:function(t){return e.handleNameSubmit(t,n,a,s,r,l,i)},className:"Name_input_form"},o.a.createElement("label",null,"Submit your name below to be added to the adoption line"),o.a.createElement("input",{type:"text",name:"name"}),o.a.createElement("button",{type:"submit",className:"AP_adopt_button"},"Submit")))}},{key:"render",value:function(){var e=this,t=this.context,n=t.availDog,a=t.allOtherDogs,s=t.availCat,r=t.allOtherCats,l=t.people,i=t.person,c=t.personPosition,u=t.setPerson,p=t.setPersonPosition,m=t.setPeople,h=t.setAvailCat,d=t.setAllOtherCats,f=t.setAvailDog,v=t.setAllOtherDogs,g=t.interval1,P=t.setInterval2;return 1===c&&clearInterval(g),l.length>=5&&clearInterval(this.state.interval2),o.a.createElement(o.a.Fragment,null,o.a.createElement("header",{className:"AP_header_container"},o.a.createElement("h2",{className:"AP_header"},"Adoptable Pets"),o.a.createElement("h3",{className:"AP_description"},"Only the first human in line will be able to adopt a dog or cat. Once they have adopted their new furry friend, they will be removed from the line. Any humans not first in line will be unable to adopt until it is their turn. ")),i||void 0===i?o.a.createElement("div",null,o.a.createElement(O,{name:i,position:c,key:i})):this.renderNameInput(),o.a.createElement("div",{className:"AP_people"},o.a.createElement("div",{className:"AP_people_inline"},o.a.createElement("h4",{className:"AP_people_inline_header",style:{color:"#8CBCB9"}},"People in line: "),l.map((function(e,t){return o.a.createElement(y,{key:t,name:e})})))),this.state.successfulAdopt?this.renderSuccessAdopt(this.state.human,this.state.adoptee.name):null,o.a.createElement("div",{className:"AP_pets_container"},o.a.createElement("div",{className:"AP_cats"},o.a.createElement("p",{className:"AP_next_avail"},"Adoptable Cat"),o.a.createElement(N,{name:s.name,age:s.age,breed:s.breed,desc:s.description,gender:s.gender,story:s.story,image:s.imageURL,key:s.name}),1===c&&i?o.a.createElement("div",{className:"AP_adopt_button"},o.a.createElement("button",{className:"AP_adopt_button",type:"button",onClick:function(){return e.handleCatAdoptActuallyClicked(h,d,c,u,p,m,P)}},"Adopt!")):null,o.a.createElement("p",{className:"AP_next_avail"},"Next Available Cats"),r.map((function(e){return o.a.createElement(j,{key:e.name,name:e.name,breed:e.breed,age:e.age})}))),o.a.createElement("div",{className:"AP_dogs"},o.a.createElement("p",{className:"AP_next_avail"},"Adoptable Dog"),o.a.createElement(N,{name:n.name,age:n.age,breed:n.breed,desc:n.description,gender:n.gender,story:n.story,image:n.imageURL,key:n.name}),1===c&&i?o.a.createElement("div",{className:"AP_adopt_button"},o.a.createElement("button",{className:"AP_adopt_button",type:"button",onClick:function(){return e.handleDogAdoptActuallyClicked(f,v,i,u,p,m)}},"Adopt!")):null,o.a.createElement("p",{className:"AP_next_avail"},"Next Available Dogs"),a.map((function(e){return o.a.createElement(j,{name:e.name,breed:e.breed,age:e.age,key:e.name})})))))}}]),t}(a.Component));k.contextType=A;var D=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("main",{className:"App"},o.a.createElement("header",{className:"Root_header"},o.a.createElement("div",null,"Petful")),o.a.createElement(h.c,null,o.a.createElement(h.a,{exact:!0,path:"/",component:E}),o.a.createElement(h.a,{path:"/adoption-page",component:k})))}}]),t}(a.Component);n(38);r.a.render(o.a.createElement(l.a,null,o.a.createElement(b,null,o.a.createElement(D,null))),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.00cd01e0.chunk.js.map